<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CleanMate AI</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f7f9f7; margin: 0; padding: 40px; color: #333; }
    .card { max-width: 650px; margin: auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    h1 { text-align: center; margin: 0 0 8px; }
    .subtitle { text-align: center; color: #666; margin: 0 0 24px; }
    label { font-weight: bold; display: block; margin-top: 18px; }
    select, button { width: 100%; padding: 10px; margin-top: 8px; font-size: 16px; }
    button { background: #8fb9a8; border: none; border-radius: 6px; color: white; cursor: pointer; margin-top: 22px; }
    button:hover { background: #7aa897; }
    .output { margin-top: 18px; padding: 15px; background: #f1f5f3; border-radius: 8px; white-space: pre-line; }
    .tips { margin-top: 18px; padding: 15px; border: 1px solid #e6ece8; border-radius: 8px; }
    footer { text-align: center; font-size: 12px; color: #888; margin-top: 18px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>CleanMate AI üßº</h1>
    <p class="subtitle">Step-by-step cleaning help for real homes</p>

    <label for="task">What do you want help with?</label>
    <select id="task">
      <option>Kitchen reset</option>
      <option>Bathroom refresh</option>
      <option>Floors and vacuuming</option>
      <option>Pet hair and smells</option>
      <option>Bedroom tidy</option>
      <option>Whole-house quick reset</option>
      <option>Airbnb turnover</option>
    </select>

    <label for="time">How much time do you have?</label>
    <select id="time">
      <option>5 minutes</option>
      <option>10 minutes</option>
      <option>20 minutes</option>
      <option>45 minutes</option>
    </select>

    <button onclick="generate()">Generate my CleanMate plan</button>

    <div class="output" id="output">Your 3-step plan will appear here.</div>

    <div class="tips">
      <strong>Quick Tips</strong>
      <ul>
        <li>Clean top to bottom (dust falls down).</li>
        <li>Spray, wait 5 minutes, then wipe (dwell time).</li>
        <li>One room at a time beats ‚Äúwhole house panic‚Äù.</li>
        <li>A 10-minute reset is a win.</li>
      </ul>
    </div>

    <footer>CleanMate provides general cleaning guidance only.</footer>

  </div>

  <script>
 
const WORKER_URL = "https://cleanmate-ai.cleanmateai.workers.dev/";



  async function generate() {
    const task = document.getElementById("task").value;
    const time = document.getElementById("time").value;
    const output = document.getElementById("output");

    output.innerText = "Generating your CleanMate plan...";

    try {
      const res = await fetch(WORKER_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ task, time, energy: "Normal" })
      });

      const text = await res.text(); // <-- read raw text first

      if (!res.ok) {
        output.innerText = `Worker error ${res.status}:\n\n${text}`;
        return;
      }

      // Try to parse JSON, but don't crash if it's not JSON
      try {
        const data = JSON.parse(text);
        output.innerText = data.plan || text;
      } catch {
        output.innerText = text;
      }

    } catch (err) {
      output.innerText = "Browser fetch failed:\n\n" + err;
    }
  }
</script>

</body>
</html>
